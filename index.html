<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>天氣預報</title>
    <link rel="stylesheet" href="./css/天氣卡片.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <style>
        * {
            box-sizing: border-box;
            font-family: 微軟正黑體;
        }

        body {
            margin: 0;
            padding: 0;
            /* background: radial-gradient要給長寬才會有顏色 */
            background: radial-gradient(rgba(79, 148, 204, 0.2), rgba(87, 161, 223, 1));
            background-attachment: fixed;
            background-size: contain;
            background-repeat: no-repeat;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding-top: 30px;
        }
    </style>
</head>

<body>
    <header>
        <div class="container">
            <h1><span onclick="btn('all')">台灣天氣概況</span></h1>
            <nav>
                <ul class="area">
                    <li onclick="btn('north')">北部</li>
                    <li onclick="btn('middle')">中部</li>
                    <li onclick="btn('south')">南部</li>
                    <li onclick="btn('east')">東部</li>
                </ul>
            </nav>
        </div>
    </header>
    <main>
        <div class="container">
            <div class="row">
                <!-- <div class="col">
                    <div class="card">
                        <h2>台中市</h2>
                        <div class="gif">
                            <img src="./img/晴時多雲偶陣雨.png" alt="">
                        </div>
                        <ul class="info">
                            <li class="data">
                                <p class="title">天氣狀況 ：</p>
                                <span>多雲時晴偶陣雨</span>
                            </li>
                            <li class="data">
                                <p class="title">溫度 ：</p>
                                <span>18。c ~ 22。c</span>
                            </li>
                            <li class="data">
                                <p class="title">降雨機率 ：</p>
                                <span> 50 % </span>
                            </li>
                            <li class="data">
                                <p class="title">體感狀態 ：</p>
                                <span>非常寒冷</span>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col">
                    <div class="card">
                        <h2>台中市</h2>
                        <div class="gif">
                            <img src="./img/晴天.png" alt="">
                        </div>
                        <ul class="info">
                            <li class="data">
                                <p class="title">天氣狀況 ：</p>
                                <span>晴天</span>
                            </li>
                            <li class="data">
                                <p class="title">溫度 ：</p>
                                <span>23。c ~ 26。c</span>
                            </li>
                            <li class="data">
                                <p class="title">降雨機率 ：</p>
                                <span> 5 % </span>
                            </li>
                            <li class="data">
                                <p class="title">體感狀態 ：</p>
                                <span>涼爽</span>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col">
                    <div class="card">
                        <h2>台中市</h2>
                        <div class="gif">
                            <img src="./img/雨天.png" alt="">
                        </div>
                        <ul class="info">
                            <li class="data">
                                <p class="title">天氣狀況 ：</p>
                                <span>雨天</span>
                            </li>
                            <li class="data">
                                <p class="title">溫度 ：</p>
                                <span>18。c ~ 22。c</span>
                            </li>
                            <li class="data">
                                <p class="title">降雨機率 ：</p>
                                <span> 50 % </span>
                            </li>
                            <li class="data">
                                <p class="title">體感狀態 ：</p>
                                <span>非常寒冷</span>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col">
                    <div class="card">
                        <h2>台中市</h2>
                        <div class="gif">
                            <img src="./img/陰天.png" alt="">
                        </div>
                        <ul class="info">
                            <li class="data">
                                <p class="title">天氣狀況 ：</p>
                                <span>陰天</span>
                            </li>
                            <li class="data">
                                <p class="title">溫度 ：</p>
                                <span>18。c ~ 22。c</span>
                            </li>
                            <li class="data">
                                <p class="title">降雨機率 ：</p>
                                <span> 50 % </span>
                            </li>
                            <li class="data">
                                <p class="title">體感狀態 ：</p>
                                <span>非常寒冷</span>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col">
                    <div class="card">
                        <h2>台中市</h2>
                        <div class="gif">
                            <img src="./img/陰天.png" alt="">
                        </div>
                        <ul class="info">
                            <li class="data">
                                <p class="title">天氣狀況 ：</p>
                                <span>陰天</span>
                            </li>
                            <li class="data">
                                <p class="title">溫度 ：</p>
                                <span>18。c ~ 22。c</span>
                            </li>
                            <li class="data">
                                <p class="title">降雨機率 ：</p>
                                <span> 50 % </span>
                            </li>
                            <li class="data">
                                <p class="title">體感狀態 ：</p>
                                <span>非常寒冷</span>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col">
                    <div class="card">
                        <h2>台中市</h2>
                        <div class="gif">
                            <img src="./img/陰天.png" alt="">
                        </div>
                        <ul class="info">
                            <li class="data">
                                <p class="title">天氣狀況 ：</p>
                                <span>陰天</span>
                            </li>
                            <li class="data">
                                <p class="title">溫度 ：</p>
                                <span>18。c ~ 22。c</span>
                            </li>
                            <li class="data">
                                <p class="title">降雨機率 ：</p>
                                <span> 50 % </span>
                            </li>
                            <li class="data">
                                <p class="title">體感狀態 ：</p>
                                <span>非常寒冷</span>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col">
                    <div class="card">
                        <h2>台中市</h2>
                        <div class="gif">
                            <img src="./img/陰天.png" alt="">
                        </div>
                        <ul class="info">
                            <li class="data">
                                <p class="title">天氣狀況 ：</p>
                                <span>陰天</span>
                            </li>
                            <li class="data">
                                <p class="title">溫度 ：</p>
                                <span>18。c ~ 22。c</span>
                            </li>
                            <li class="data">
                                <p class="title">降雨機率 ：</p>
                                <span> 50 % </span>
                            </li>
                            <li class="data">
                                <p class="title">體感狀態 ：</p>
                                <span>非常寒冷</span>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col">
                    <div class="card">
                        <h2>台中市</h2>
                        <div class="gif">
                            <img src="./img/陰天.png" alt="">
                        </div>
                        <ul class="info">
                            <li class="data">
                                <p class="title">天氣狀況 ：</p>
                                <span>陰天</span>
                            </li>
                            <li class="data">
                                <p class="title">溫度 ：</p>
                                <span>18。c ~ 22。c</span>
                            </li>
                            <li class="data">
                                <p class="title">降雨機率 ：</p>
                                <span> 50 % </span>
                            </li>
                            <li class="data">
                                <p class="title">體感狀態 ：</p>
                                <span>非常寒冷</span>
                            </li>
                        </ul>
                    </div>
                </div> -->
            </div>
        </div>
    </main>
    <footer>
        <div class="container">
            <span>© 自我學習用天氣API</span>
        </div>
    </footer>

    <script>
        var row = document.querySelector('.row')
        // fetch('網址','送過去資料(不是必填)')
        // .then(function(送回來的資料變數名稱){
        //     return 回來的資料.json()
        //     //資料的處理，通常是將資料萃取
        // })
        // .then(function (接收上面的return資料) {
        //         接收上面的資料，做該做的處理
        //     })
        function btn(sort) {
            fetch('https://opendata.cwb.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=CWB-B5282D9D-8FDD-40E9-AD48-B1DF3270465D')

                .then(function (response) {
                    return response.json()
                    //資料的處理，通常是將資料萃取
                })
                //資料要全部都寫在這裡面
                .then(function (weather) {
                    console.log(weather)//所有資料
                    // console.log(weather.records.location[11].locationName)//台中市
                    var location = weather.records.location
                    // var north = ['基隆市', '臺北市', '新北市', '桃園市', '新竹縣', '新竹市', '宜蘭縣', '連江縣']
                    // var middle = ['苗栗縣', '臺中市', '南投縣', '彰化縣', '雲林縣', '金門縣']
                    // var south = ['嘉義縣', '嘉義市', '臺南市', '高雄市', '屏東縣', '澎湖縣']
                    // var east = ['花蓮縣', '臺東縣']
                    // console.log(north)
                    row.innerHTML = ''
                    //給個迴圈讓他重複列印
                    for (let index = 0; index < location.length; index++) {
                        //利用降雨機率去判斷要放什麼圖片
                        if (location[index].weatherElement[1].time[0].parameter.parameterName <= 30) {
                            var img = '晴天'
                        } else if (location[index].weatherElement[1].time[0].parameter.parameterName <= 60) {
                            var img = '陰天'
                        } else if (location[index].weatherElement[1].time[0].parameter.parameterName <= 80) {
                            var img = '晴時多雲偶陣雨'
                        } else { var img = '雨天' }
                        // console.log(img)
                        //判斷區域
                        if (location[index].locationName == '基隆市' || location[index].locationName == '臺北市' || location[index].locationName == '新北市' || location[index].locationName == '桃園市' || location[index].locationName == '新竹縣' || location[index].locationName == '新竹市' || location[index].locationName == '宜蘭縣' || location[index].locationName == '連江縣') {
                            var area = 'north'
                        } else if (location[index].locationName == '苗栗縣' || location[index].locationName == '臺中市' || location[index].locationName == '南投縣' || location[index].locationName == '彰化縣' || location[index].locationName == '雲林縣' || location[index].locationName == '金門縣') {
                            var area = 'middle'
                        } else if (location[index].locationName == '嘉義縣' || location[index].locationName == '嘉義市' || location[index].locationName == '臺南市' || location[index].locationName == '高雄市' || location[index].locationName == '屏東縣' || location[index].locationName == '澎湖縣') {
                            var area = 'south'
                        } else { var area = 'east' }
                        // console.log(location[index].locationName)
                        // console.log(area)
                        if (area == sort || sort == 'all') {
                            row.innerHTML += `
                            <div class="col">
                                <div class="animate__animated animate__jackInTheBox">
                                    <div class="card">
                                        <h2>${location[index].locationName}</h2>
                                        <div class="gif">
                                            <img src="./img/${img}.png" alt="">
                                        </div>
                                        <ul class="info">
                                            <li class="data">
                                                <p class="title">天氣狀況 ：</p>
                                                <span>${location[index].weatherElement[0].time[0].parameter.parameterName}</span>
                                            </li>
                                            <li class="data">
                                                <p class="title">溫度 ：</p>
                                                <span>${location[index].weatherElement[2].time[0].parameter.parameterName}。c ~
                                                ${location[index].weatherElement[4].time[0].parameter.parameterName}。c 
                                                </span>
                                            </li>
                                            <li class="data">
                                                <p class="title">降雨機率 ：</p>
                                                <span> ${location[index].weatherElement[1].time[0].parameter.parameterName} % </span>
                                            </li>
                                            <li class="data">
                                                <p class="title">體感狀態 ：</p>
                                                <span>${location[index].weatherElement[3].time[0].parameter.parameterName}</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            `
                        }
                    }

                })
        }
        btn('all')
    </script>
</body>

</html>